# This location block redirects a request to a random episode of the show 'Breaking Bad'
# https://www.imdb.com/title/tt0903747/
location /netflix/breakingbad {
  content_by_lua_block {
    math.randomseed(ngx.now()*1000)

    local base_url = "https://www.netflix.com/watch/"
    local episodes = {
      -- Season 1
      "70196252", "70196253", "70196254", "70196255", "70196256", "70196257", "70196258",
      -- Season 2
      "70196259", "70196260", "70196261", "70196262", "70196263", "70196264", "70196265", "70196266", "70196267", "70196268", "70196269", "70196270", "70196271",
      -- Season 3
      "70196272", "70196273", "70196274", "70196275", "70196276", "70196277", "70196278", "70196279", "70196280", "70196281", "70196282", "70196283", "70196284",
      -- Season 4
      "70236035", "70236036", "70236037", "70236038", "70236039", "70236040", "70236041", "70236042", "70236043", "70236044", "70236045", "70236046", "70236047",
      -- Season 5
      "70236412", "70236413", "70236414", "70236415", "70236416", "70236417", "70236418", "70236419", "70236421", "70236422", "70236423", "70236424", "70236425", "70236426", "70236427", "70236428"
    }
    local random_episode = episodes[math.random(1, #episodes)]

    ngx.redirect(base_url .. random_episode)
  }
}
